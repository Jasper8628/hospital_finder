(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{171:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){},395:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(67),c=n.n(i),o=(n(171),n(164)),s=n(4),l=n(3),r=n(166),d=n(11),u=n(1),j=Object(a.createContext)(),b=j.Provider,p=function(e,t){switch(t.type){case"pain":return Object(d.a)(Object(d.a)({},e),{},{painLevel:t.pain});case"switchTab":return Object(d.a)(Object(d.a)({},e),{},{openTab:t.tabName});case"closeMap":return Object(d.a)(Object(d.a)({},e),{},{mobileMap:!1});case"direction":return Object(d.a)(Object(d.a)({},e),{},{destination:t.destination,mobileMap:t.mobileMap});case"location":return Object(d.a)(Object(d.a)({},e),{},{location:t.location});default:throw new Error("Invalid action type: ".concat(t.type))}},g=function(e){e.value;var t=Object(r.a)(e,["value"]),n=Object(a.useReducer)(p,{painLevel:0,openTab:"hospital",mobileMap:!1,destination:{},location:{}}),i=Object(l.a)(n,2),c=i[0],o=i[1];return Object(u.jsx)(b,Object(d.a)({value:[c,o]},t))},m=function(){return Object(a.useContext)(j)},h=n(22),O=n.n(h),f="https://australia-southeast1-hospital-finder-4a002.cloudfunctions.net/",v={headers:{header1:"Access-Control-Allow-Origin"}},x={getUsers:function(){return O.a.get(f+"getPatients",v)},deleteUser:function(e){return O.a.delete(f+"deletePatient",e,v)},postUser:function(e){return console.log(e),O.a.post(f+"addPatient",e,v)}};n(191);var N=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1];Object(a.useEffect)((function(){c()}),[]);var c=function(){x.getUsers().then((function(e){var t=e.data.data;t.forEach((function(e){console.log(e._ref._path.segments[1])})),i(t)})).catch((function(e){return console.log(e)}))},o=function(e){var t={id:e.target.name};x.deleteUser({data:t}).then((function(e){console.log(e),c()})).catch((function(e){return console.log(e)}))};return Object(u.jsx)("div",{className:"admin-container",children:n.length?Object(u.jsx)("div",{className:"patient-container",children:n.map((function(e,t){return Object(u.jsxs)("div",{className:"patient-card",children:[Object(u.jsxs)("div",{className:"patient-header",children:[Object(u.jsx)("h2",{children:e._fieldsProto.name?e._fieldsProto.name.stringValue:"name: n/a"}),Object(u.jsx)("p",{children:e._fieldsProto.age?e._fieldsProto.age.stringValue:"age: n/a"}),Object(u.jsx)("p",{children:e._fieldsProto.gender?e._fieldsProto.gender.stringValue:"gender: n/a"})]}),Object(u.jsxs)("div",{className:"patient-body",children:[Object(u.jsxs)("ul",{children:[Object(u.jsx)("h4",{children:"Symptoms"}),JSON.parse(e._fieldsProto.illnesses.stringValue).length?JSON.parse(e._fieldsProto.illnesses.stringValue).map((function(e,t){return Object(u.jsx)("li",{children:e},t)})):"no symptoms reported"]}),Object(u.jsx)("div",{className:"bottom-container",children:Object(u.jsx)("button",{name:e._ref._path.segments[1],onClick:o,children:Object(u.jsx)("span",{className:"fas fa-trash-alt"})})})]})]},t)}))}):Object(u.jsx)("div",{children:"No users in the database"})})},y=n(46);var C=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(0),o=Object(l.a)(c,2),s=o[0],r=o[1],j=Object(a.useState)({}),b=Object(l.a)(j,2),p=b[0],g=b[1],h=m(),f=Object(l.a)(h,2),v=f[0],N=f[1];Object(a.useEffect)((function(){O.a.get("".concat("http://dmmw-api.australiaeast.cloudapp.azure.com:8080/illnesses?limit=8","&page=").concat(s>1?1:s)).then((function(e){i(e.data._embedded.illnesses)}))}),[s]);var C=function(e){var t=e.target.getAttribute("name");r("back"===t?s-1:s+1)},L=function(e){var t=e.target,n=t.name,a=t.value;console.log(n,a),g(Object(d.a)(Object(d.a)({},p),{},Object(y.a)({},n,a)))},P=function(e){var t=e.target.getAttribute("name");g(Object(d.a)(Object(d.a)({},p),{},Object(y.a)({},t,!p[t])))};return Object(u.jsxs)("div",{className:"illness"===v.openTab?"accordian-container active":"accordian-container",children:[Object(u.jsx)("div",{className:"accordian-header",name:"illness",onClick:function(e){var t=e.target.getAttribute("name");N({type:"switchTab",tabName:v.openTab===t?"hospital":t})},children:Object(u.jsx)("h1",{children:"Record Symptoms"})}),Object(u.jsxs)("div",{id:"illnesses",className:"accordian-body",children:[Object(u.jsx)("div",{className:s>=2?"illness-list-hide":"illness-list",children:n.map((function(e,t){return Object(u.jsxs)("button",{className:"illness-button",name:e.illness.name,onClick:P,children:[e.illness.name,Object(u.jsx)("span",{className:p[e.illness.name]?"fas fa-circle":"far fa-circle"})]},t)}))}),Object(u.jsxs)("div",{className:s>=2?"illness-list":"illness-list-hide",children:[Object(u.jsx)("input",{className:"patient-input",placeholder:"Full Name...",name:"name",value:p.name,onChange:L}),Object(u.jsx)("input",{className:"patient-input",placeholder:"Age...",name:"age",value:p.age,onChange:L}),Object(u.jsxs)("select",{className:"patient-input",name:"gender",onChange:L,children:[Object(u.jsx)("option",{name:"n/a",value:"n/a",children:"Gender..."}),Object(u.jsx)("option",{name:"Female",value:"Female",children:"Female"}),Object(u.jsx)("option",{name:"Male",value:"Male",children:"Male"}),Object(u.jsx)("option",{name:"Other",value:"Other",children:"Other"})]})]})]}),Object(u.jsxs)("div",{className:"button-container",children:[Object(u.jsx)("button",{className:s>0?"page-button":"page-button-hide",onClick:C,name:"back",children:"Back"}),Object(u.jsx)("button",{className:s>=2?"page-button-hide":"page-button",onClick:C,name:"next",children:"Next"}),Object(u.jsx)("button",{className:s>=2?"page-button":"page-button-hide",onClick:function(){var e=[];Object.keys(p).forEach((function(t){!0===p[t]&&e.push(t)}));var t=p;t.illnesses=JSON.stringify(e),console.log("logging data: ",t),x.postUser({body:t}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),setTimeout((function(){N({type:"switchTab",tabName:"hospital"})}),800)},name:"next",children:"Submit"})]})]})};var L=function(e){var t=e.painLevel,n=e.hospital.waitingList[t],a=n.patientCount*n.averageProcessTime;return Object(u.jsx)("span",{className:"wait-time",children:0===a?"Wait time: ".concat(a,"min"):a<=60?"Wait time: ".concat(a,"mins"):"Wait time: ".concat(Math.round(a/6)/10,"hrs")})};n(192);var P=function(){var e="http://dmmw-api.australiaeast.cloudapp.azure.com:8080/hospitals?limit=25",t=Object(a.useState)([]),n=Object(l.a)(t,2),i=n[0],c=n[1],o=m(),s=Object(l.a)(o,2),r=s[0],d=s[1];Object(a.useEffect)((function(){O.a.get(e).then((function(t){var n=t.data._embedded.hospitals;O.a.get(e+"&page=1").then((function(e){var t=n.concat(e.data._embedded.hospitals).sort((function(e,t){return e.waitingList[r.painLevel].patientCount*e.waitingList[r.painLevel].averageProcessTime-t.waitingList[r.painLevel].patientCount*t.waitingList[r.painLevel].averageProcessTime}));c(t)}))}))}),[r.painLevel]);var j=function(e){var t=window.innerWidth,n={lat:parseFloat(e.target.getAttribute("data-lat")),lng:parseFloat(e.target.getAttribute("data-lng"))};console.log("logging desination:",n),console.log("clicked: ",e.target.classList),d({type:"direction",destination:n,mobileMap:t<=1e3})},b=function(e,t){var n=111263.0566*(e.lat-t.lat),a=111263.0566*(e.lng-t.lng);return Math.round(Math.sqrt(n*n+a*a)/100)/10};return Object(u.jsxs)("div",{className:"hospital"===r.openTab?"accordian-container active":"accordian-container",children:[Object(u.jsx)("div",{className:"accordian-header",onClick:function(e){var t=e.target.getAttribute("name");d({type:"switchTab",tabName:r.openTab===t?"illness":t})},name:"hospital",children:Object(u.jsx)("h1",{children:"Suggested Hospitals"})}),Object(u.jsx)("div",{className:"accordian-body",children:i.map((function(e,t){return Object(u.jsxs)("button",{className:"list-button","data-lat":e.location.lat,"data-lng":e.location.lng,onClick:j,children:[Object(u.jsx)("h3",{children:e.name}),Object(u.jsxs)("div",{className:"note-container",children:[Object(u.jsxs)("span",{children:["Distance: ",b(e.location,r.location)," kms"]}),Object(u.jsx)(L,{painLevel:r.painLevel,hospital:e})]})]},t)}))})]})},w=n(24),k=n(47),S=n.n(k),M="AIzaSyCxo5m4EhnOvW9TOdazdQRHhjWo4cyOQ54";S.a.setApiKey(M),S.a.enableDebug();var T=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],c=m(),o=Object(l.a)(c,2),s=o[0],r=o[1],d=Object(a.useState)({}),j=Object(l.a)(d,2),b=j[0],p=j[1],g=Object(a.useState)({lat:"",lng:""}),h=Object(l.a)(g,2),f=h[0],v=h[1],x=new google.maps.DirectionsService;Object(a.useEffect)((function(){y()}),[]),Object(a.useEffect)((function(){N()}),[s.painLevel]),Object(a.useEffect)((function(){var e=s.destination,t=s.location;x.route({origin:t,destination:e,travelMode:google.maps.TravelMode.DRIVING},(function(e,t){t===google.maps.DirectionsStatus.OK?(console.log("logging direction result: ",e),p(e)):console.error("error fetching directions ".concat(e))}))}),[s.destination]);var N=function(){O.a.get("http://dmmw-api.australiaeast.cloudapp.azure.com:8080/hospitals?limit=25").then((function(e){return i(e.data._embedded.hospitals)}))},y=function(){var e="",t="";navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){e=n.coords.latitude,t=n.coords.longitude,v({lat:e,lng:t}),S.a.fromLatLng(e,t).then((function(e){}))}),(function(e){alert("Please enable your GPS position feature.")}),{maximumAge:1e4,timeout:5e3,enableHighAccuracy:!0}):console.log("Geolocation privilege denied")},C=function(e){var t=e.latLng.lat(),n=e.latLng.lng();v({lat:t,lng:n}),console.log(t,n),S.a.fromLatLng(t,n).then((function(e){r({type:"location",location:{lat:t,lng:n}})}))},P=Object(a.memo)((function(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),i=t[0],c=t[1];return Object(u.jsx)("div",{children:Object(u.jsxs)(w.GoogleMap,{defaultZoom:11,defaultCenter:{lat:f.lat,lng:f.lng},defaultOptions:{disableDefaultUI:!0,controlSize:21},children:[Object(u.jsx)(w.DirectionsRenderer,{directions:b}),Object(u.jsx)(w.Marker,{name:"You're here",draggable:!0,onDragEnd:C,position:{lat:f.lat,lng:f.lng},options:{strokeColor:"#FFD300"}}),n?n.map((function(e){return Object(u.jsxs)(w.Marker,{position:{lat:e.location.lat,lng:e.location.lng},onClick:function(){c(e)},children:[i&&i.id===e.id&&Object(u.jsx)(w.InfoWindow,{onCloseClick:function(){c(null)},children:Object(u.jsxs)("div",{className:"infoWindow",children:[Object(u.jsx)("p",{children:i.name}),Object(u.jsxs)("p",{children:["Position in queue: ",i.waitingList[s.painLevel].patientCount," "]}),Object(u.jsx)(L,{painLevel:s.painLevel,hospital:e})]})})," "]},e.id)})):"",Object(u.jsx)(w.Circle,{defaultCenter:{lat:f.lat,lng:f.lng}})]})})})),k=Object(w.withScriptjs)(Object(w.withGoogleMap)(P));return Object(u.jsxs)("div",{className:s.mobileMap?"map-container-mobile":"map-container",children:[Object(u.jsxs)("button",{className:"close-map-button",onClick:function(e){r({type:"closeMap"}),console.log(e.target)},children:[Object(u.jsx)("span",{className:"fas fa-arrow-left"})," Back"]}),Object(u.jsx)(k,{googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=".concat(M),loadingElement:Object(u.jsx)("div",{style:{height:"100%"}}),containerElement:Object(u.jsx)("div",{style:{height:"93%"}}),mapElement:Object(u.jsx)("div",{style:{height:"100%"}})})]})};n(391);var E=function(){var e=m(),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(u.jsxs)("div",{className:"sliderContainer",children:[Object(u.jsx)("input",{className:["noPain","mildPain","mediumPain","badPain","severePain"][n.painLevel],id:"slider",type:"range",name:"slider",min:"0",value:n.painLevel,max:"4",onChange:function(e){var t=parseInt(e.target.value);a({type:"pain",pain:t})},style:{background:"hsla(".concat(["170","115","57","22","10"][n.painLevel],",100%,50%,1)")}}),Object(u.jsx)("label",{children:"Pain Level"})]})};n(392);var _=function(){Object(a.useEffect)((function(){c()}),[]);var e=m(),t=Object(l.a)(e,2),n=t[0],i=t[1],c=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,n=e.coords.longitude;i({type:"location",location:{lat:t,lng:n}})}),(function(e){alert("Please enable your GPS position feature.")}),{maximumAge:1e4,timeout:5e3,enableHighAccuracy:!0}):console.log("Geolocation privilege denied")};return Object(u.jsxs)("div",{className:"home-container",children:[Object(u.jsxs)("div",{className:n.mobileMap?"left-container-mobile":"left-container",children:[Object(u.jsx)(C,{}),Object(u.jsx)(P,{}),Object(u.jsx)(E,{})]}),Object(u.jsx)(T,{})]})};var A=function(){return Object(u.jsx)(g,{children:Object(u.jsx)(o.a,{children:Object(u.jsxs)(s.c,{children:[Object(u.jsxs)(s.a,{exact:!0,path:"/",children:[" ",Object(u.jsx)(_,{})]}),Object(u.jsxs)(s.a,{exact:!0,path:"/admin",children:[" ",Object(u.jsx)(N,{})]})]})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,396)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),c(e),o(e)}))};c.a.render(Object(u.jsx)(A,{}),document.getElementById("root")),F()}},[[395,1,2]]]);
//# sourceMappingURL=main.5ff0fb2e.chunk.js.map